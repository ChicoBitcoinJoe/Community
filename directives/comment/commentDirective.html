<md-card md-theme="dark-theme" style="margin: 0px {{marginRight}}px {{marginBottom}}px {{marginLeft}}px; padding: 8px 0px 0px {{paddingLeft}}px; border-left: {{borderWidth}}px solid #242424; border-top: {{borderTop}}px solid #242424; border-bottom:0px solid #242424; background-color:rgba(50,50,50,1);" layout="column">
    <div layout="row">
        <md-button aria-label="minimize comment" style="margin:0px 0px 0px 5px; max-height:36px;" ng-if="commentDepth>0" ng-click="$parent.minimized = !$parent.minimized; $parent.showExtras=false; $parent.show=false" >
            <md-icon aria-label="minimize" ng-show="!minimized" md-svg-src="images/icons/ic_indeterminate_check_box_white_24px.svg"></md-icon>
            <md-icon aria-label="minimize" ng-show="minimized" md-svg-src="images/icons/ic_add_box_white_24px.svg"></md-icon>
        </md-button>
        <div layout="column" flex>
            <md-card-content ng-hide="!post.comment" class="comment-hover-fx" ng-click="showExtras = !showExtras" style="margin-right:8px; margin-bottom:8px; margin-left:{{marginLeft}}px; padding:8px;">
                <div ng-show="hasPrivateVoted" layout="row">
                    <h5 layout="row" style="margin:0px; line-height: 16px;">
                        <span style="line-height: 16px;" class="md-subhead"><small><username account="post.poster" unique="true"></username></small></span>
                    </h5>
                    <br>
                    <span flex></span>
                    <h4 style="margin:0px;">{{user.score}} - {{user.bestUpvoteStreak}}/{{user.worstDownvoteStreak}}</h4>
                </div>
                <div ng-hide="hasPrivateVoted || commentDepth == 0" layout="row" ng-show="commentDepth > 0">
                    <h5 layout="row" style="margin:0px; line-height: 16px;">
                        <span style="line-height: 16px;" class="md-subhead"><small>anonymous</small></span>
                    </h5>
                </div>
                <div ng-hide="minimized" style="margin-top:5px;" ng-bind-html="comment" class="comment"></div>
            </md-card-content>
            <md-card-actions ng-show="showExtras || commentDepth == 0" style="margin-bottom:8px !important; padding-left: {{marginLeft}}px !important;" layout="row" layout-align="start center">
                <md-card-icon-actions>
                    <md-button aria-label="Favorite">
                        <md-icon ng-show="!isSaved" ng-click="save()" md-svg-src="images/icons/ic_favorite_border_white_24px.svg"></md-icon>
                        <md-icon ng-show="isSaved" ng-click="unsave()" md-svg-src="images/icons/ic_favorite_white_24px.svg"></md-icon>
                    </md-button>
                    <md-button aria-label="Share">
                        <md-icon md-svg-src="images/icons/ic_share_white_24px.svg"></md-icon>
                    </md-button>
                    <md-button ng-hide="voteIsPrivate || hasPrivateVoted" aria-label="upvote user" ng-click="voteIsPrivate = true" style="text-transform: lowercase;">
                        <md-icon md-svg-icon="images/icons/ic_lock_white_24px.svg"></md-icon> Private Vote
                    </md-button>
                    <md-button ng-show="voteIsPrivate" ng-hide="hasPrivateVoted || !voteIsPrivate" aria-label="upvote user" ng-click="privateUpvote()">
                        <md-icon md-svg-icon="images/icons/ic_arrow_upward_white_24px.svg"></md-icon>
                    </md-button>
                    <md-button ng-show="voteIsPrivate" ng-hide="hasPrivateVoted || !voteIsPrivate" aria-label="downvote user" ng-click="privateDownvote()">
                        <md-icon md-svg-icon="images/icons/ic_arrow_downward_white_24px.svg"></md-icon>
                    </md-button>
                    <md-button ng-show="voteIsPrivate" ng-hide="hasPrivateVoted || !voteIsPrivate" aria-label="downvote user" ng-click="voteIsPrivate = false">
                        <md-icon md-svg-icon="images/icons/ic_close_white_24px.svg"></md-icon>
                    </md-button>
                    <md-button ng-hide="voteIsPublic" aria-label="upvote user" ng-click="voteIsPublic = true" style="text-transform: lowercase;">
                        <md-icon md-svg-icon="images/icons/ic_public_white_24px.svg"></md-icon> Public Vote
                    </md-button>
                    <md-button ng-show="voteIsPublic" ng-hide="hasPublicVoted || !voteIsPublic" aria-label="upvote user" ng-click="publicUpvote()">
                        <md-icon md-svg-icon="images/icons/ic_arrow_upward_white_24px.svg"></md-icon>
                    </md-button>
                    <md-button ng-show="voteIsPublic" ng-hide="hasPublicVoted || !voteIsPublic" aria-label="downvote user" ng-click="publicDownvote()">
                        <md-icon md-svg-icon="images/icons/ic_arrow_downward_white_24px.svg"></md-icon>
                    </md-button>
                    <md-button ng-show="voteIsPublic" ng-hide="hasPublicVoted || !voteIsPublic" aria-label="downvote user" ng-click="voteIsPublic = false">
                        <md-icon md-svg-icon="images/icons/ic_close_white_24px.svg"></md-icon>
                    </md-button>
                    <span flex></span>
                    <md-button aria-label="reply to comment" ng-click="showSubmitCommentPanel()" style="text-transform: lowercase;">{{replyText}}</md-button>
                </md-card-icon-actions>
            </md-card-actions>
        </div>
    </div>
    <span style="height:{{marginBottom}}px; background-color:rgba(33,33,33,1);"></span>
    <submit-comment ng-show="showSubmitCommentPanel()" community="activeView" parent="txHash" root-parent="rootTxHash" comment-depth="commentDepth"></submit-comment>
    <div ng-hide="minimized" ng-repeat="comment in comments">
        <comment-card tx-hash="comment" comment-depth="commentDepth + 1"></comment-card>
    </div>
</md-card>